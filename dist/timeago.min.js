!function(t,e){"object"==typeof module&&module.exports?module.exports=e(t):t.timeago=e(t)}("undefined"!=typeof window?window:this,function(){function t(t){if(t instanceof Date)return t;if(isNaN(t)){if(/^\d+$/.test(t))return new Date(e(t,10));var n=(t||"").trim();return n=n.replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/T/," ").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(n)}return new Date(e(t))}function e(t){return parseInt(t)}function n(t,e){return t%=e,t=t?e-t:e,Math.ceil(t)}function r(e,n){return(t(e)-t(n).getTime())/1e3}function o(t){for(var e=1,r=0,o=t;t>=l[r]&&r<p;r++)t/=l[r],e*=l[r];return n(o,e)}function i(t){return t.getAttribute?t.getAttribute(h):t.attr?t.attr(h):void 0}function a(t,e){this.timers=Object.create(null),this.defaultLocale=t||"en",this.nowDate=e}function u(t,e){return new a(t,e)}var f=0,c=["second","minute","hour","day","week","month","year"],s=["秒","分钟","小时","天","周","月","年"],d={en:function(t,e){if(0===e)return["just now","a while"];var n=c[parseInt(e/2)];return t>1&&(n+="s"),[t+" "+n+" ago","in "+t+" "+n]},zh_CN:function(t,e){if(0===e)return["刚刚","片刻后"];var n=s[parseInt(e/2)];return[t+n+"前",t+n+"后"]}},l=[60,60,24,7,365/7/12,12],p=6,h="datetime";return a.prototype.cancel=function(){for(var t in this.timers)clearTimeout(this.timers[t]);this.timers={}},a.prototype.render=function(t,e){void 0===t.length&&(t=[t]);for(var n=0;n<t.length;n++)this.doRender(t[n],i(t[n]),e,++f)},a.prototype.doRender=function(t,e,n,i){var a=r(this.getNowDate(),e),u=this;t.innerHTML=this.formatDiff(a,this.validateAndGetLocale(n)),this.timers["k"+i]=setTimeout(function(){u.doRender(t,e,n,i)},1e3*o(a))},a.prototype.getNowDate=function(){return this.nowDate?t(this.nowDate):new Date},a.prototype.validateAndGetLocale=function(t){return d[t]?t:this.defaultLocale},a.prototype.formatDiff=function(t,n){var r=0,o=0;for(t<0&&(r=1),t=Math.abs(t);t>=l[o]&&o<p;o++)t/=l[o];return t=e(t),o*=2,t>(0===o?9:1)&&(o+=1),d[n](t,o)[r].replace("%s",t)},a.prototype.format=function(t,e){return this.formatDiff(r(this.getNowDate(),t),this.validateAndGetLocale(e))},a.prototype.setLocale=function(t){this.defaultLocale=t},u.register=function(t,e){d[t]=e},u});